<div id="readme" class="Box-body readme blob js-code-block-container">
 <article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><p><a href="https://www.microchip.com" rel="nofollow"><img src="images/MicrochipLogo.png" alt="MCHP" style="max-width:100%;"></a></p>

# Plant Monitoring System using PIC16F18446

## Objective:
Plant monitoring system that provides automated control of the soil moisture and air humidity in a greenhouse. The application features a display that shows all the environment information required for the proper development of a plant (humidity, temperature, soil moisture).

## Description:

The system starts by initializing the temperature and humidity sensor interface, the OLED
display interface and the timer. After the initialization, the following operations are executed in the main loop:

1. Clear the WDT <br> If the WDT is not cleared in less than two seconds, the system is restarted.
2. Read analog and digital sensors <br> Acquire data that describe the environment using the hardware components.
3. Display data from the sensors <br> The acquired data from the sensors are displayed.
4. Adjust the humidity <br> If the humidity value is over 75%, both the intake and the exhaust fans are activated. The greenhouse is
ventilated until the humidity drops below 70%.
5. Adjust the soil moisture <br> Every eight hours, data is read using the soil moisture sensor. If the moisture is under 70%, the water pump
will be activated for five seconds, which is enough to rehydrate the soil.
6. Reservoir water level indicator <br> If the water level sensor reads a value which is lower than 10%, then a message will display on the OLED C
click board until the reservoir will be filled above 70%.
7. Sleep mode <br> The system enters Sleep mode to reduce power consumption. The timer generates an interrupt every second,
so the system will wake up and run the loop again.

The humidity, soil moisture and water level values are specific to this application according to the plant and the water
reservoir dimensions. These values are configurable and can be changed in the main.c source file by modifying
some macro definitions values.

<img src="images/flowchart.jpg" alt="Hardware Setup"/>

## Resources:
- MPLAB® X IDE 5.30 or newer [(microchip.com/mplab/mplab-x-ide)](http://www.microchip.com/mplab/mplab-x-ide)
- MPLAB® XC8 2.10 or newer compiler [(microchip.com/mplab/compilers)](http://www.microchip.com/mplab/compilers)
- MPLAB® Code Configurator (MCC) 3.95.0 or newer [(microchip.com/mplab/mplab-code-configurator)](https://www.microchip.com/mplab/mplab-code-configurator)
- PIC16F18446 Curiosity Nano [(DM164144)](https://www.microchip.com/DevelopmentTools/ProductDetails/PartNO/DM164144)
- Curiosity Nano Base for Click Boards™ [(AC164162)](https://www.microchip.com/Developmenttools/ProductDetails/AC164162)
- OLED C click [(oled-c-click)](https://www.mikroe.com/oled-c-click)
- RELAY click [(relay-click)](https://www.mikroe.com/relay-click)
- Temp&Hum click [(temp-hum-click)](https://www.mikroe.com/temp-hum-click)
- [PIC16F18446 datasheet](http://ww1.microchip.com/downloads/en/DeviceDoc/40001985B.pdf) for more information or specifications.

## Hardware Configuration:

### Peripherals used:
- MSSP1 (SPI) to display data on OLED C click
- MSSP2 (I2C) to read data from Temp&Hum click
- ADCC to read analog sensors (soil moisture, water level sensor)
- TMR0 to generate interrupt every second

### Schematic:
<img src="images/schematic.png" alt="Hardware Setup"/><br>

## MCC Settings:

This application uses Foundation Services Libraries and Micro-E Clicks software provided through MCC. The following screenshots illustrate the settings from MCC.

### ADCC:
<img src="images/adcc.jpg"/><br>

### MSSP1:
MSSP1 is generated by oledC

<img src="images/mssp1.jpg"/><br>

### MSSP2:
<img src="images/mssp2.jpg"/><br>

### TMR0:
<img src="images/tmr0.jpg"/><br>

### Miscro-E Clicks - Display - oledC:
<img src="images/oledc.jpg"/><br>

### Pin Manager:
<img src="images/grid.jpg"/><br>
<img src="images/pin.jpg"/><br>

## Results:
<img src="images/greenhouse.png"/>
